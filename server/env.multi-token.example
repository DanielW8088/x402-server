# ===========================================
# Server Configuration
# ===========================================

# Server port (default: 4021)
PORT=4021

# Network: base or base-sepolia
NETWORK=base-sepolia

# ===========================================
# Database Configuration
# ===========================================

# PostgreSQL connection string
DATABASE_URL=postgresql://user:password@host:port/database

# SSL Configuration (optional, for remote databases)
DB_SSL_ENABLED=true
# DB_SSL_CA=/path/to/server-ca.pem
# DB_SSL_CERT=/path/to/client-cert.pem
# DB_SSL_KEY=/path/to/client-key.pem

# ===========================================
# Redis Configuration
# ===========================================

# Redis URL (optional, for caching)
REDIS_URL=redis://localhost:6379

# ===========================================
# Private Keys (REQUIRED)
# ===========================================

# ⚠️  SECURITY UPDATE: Private keys now stored in secure file
# See server/PRIVATE_KEY_SETUP.md for setup instructions
#
# Default location: /etc/secret/private.key (permissions: 600)
# Custom location: Set PRIVATE_KEY_FILE=/path/to/your/private.key
#
# File format (JSON):
# {
#   "serverPrivateKey": "0x...",
#   "minterPrivateKey": "0x...",
#   "lpDeployerPrivateKey": "0x..."
# }
#
# Quick setup:
# 1. sudo mkdir -p /etc/secret
# 2. sudo nano /etc/secret/private.key  (add JSON content)
# 3. sudo chmod 600 /etc/secret/private.key
# 4. sudo chown $(whoami) /etc/secret/private.key
#
# Migration from old .env: Run scripts/migrate-keys-to-file.sh

# Optional: Override default private key file location
# PRIVATE_KEY_FILE=/etc/secret/private.key

# ===========================================
# Contract Addresses
# ===========================================

# LaunchTool contract (for LP deployment)
# Deploy once using: npx hardhat run scripts/deployLaunchTool.js
LAUNCH_TOOL_ADDRESS=0x...

# Excess recipient address (receives LP deployment leftovers)
# Optional, defaults to LP_DEPLOYER if not set
EXCESS_RECIPIENT_ADDRESS=0x...

# ===========================================
# RPC Configuration
# ===========================================

# Base Sepolia RPC URL (testnet)
# Supports multiple URLs separated by comma for load balancing
# Example: url1,url2,url3
BASE_SEPOLIA_RPC_URL=https://sepolia.base.org

# Base Mainnet RPC URL (mainnet)
# Supports multiple URLs separated by comma
BASE_RPC_URL=https://mainnet.base.org

# ===========================================
# x402 Configuration
# ===========================================

# x402 Facilitator URL
X402_FACILITATOR_URL=https://x402.org/facilitator

# Enable/disable x402 payment method
X402_ENABLED=true

# ===========================================
# AI Agent Configuration (NEW!)
# ===========================================

# Encryption key for agent wallet private keys
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# IMPORTANT: Keep this secret and backed up!
AGENT_ENCRYPTION_KEY=1a2b3c4d5e6f7890abcdef1234567890fedcba0987654321abcdef1234567890

# ===========================================
# Queue Configuration
# ===========================================

# Mint queue batch interval (seconds)
# How often to process batched mint transactions
# Default: 5 seconds
# MINT_BATCH_INTERVAL_SECONDS=5

# Payment queue batch interval (milliseconds)
# How often to process queued payment transactions
# Default: 2000ms (2 seconds)
# PAYMENT_BATCH_INTERVAL_MS=2000

# ===========================================
# Token Deployment Defaults
# ===========================================

# Default token configuration (can be overridden per deployment)
# DEFAULT_MINT_AMOUNT=10000000000  # 10,000 tokens (with 6 decimals)
# DEFAULT_MAX_MINT_COUNT=160000
# DEFAULT_PRICE_PER_MINT=1000000  # 1 USDC (with 6 decimals)
# DEFAULT_POOL_SEED_AMOUNT=40000000000  # 40,000 tokens for LP

# ===========================================
# Environment & Logging
# ===========================================

NODE_ENV=production

# Log level: DEBUG, INFO, WARN, ERROR, SILENT
# Development default: DEBUG (shows all logs)
# Production default: INFO (hides debug logs)
# LOG_LEVEL=INFO

# ===========================================
# Notes
# ===========================================

# 1. Private Keys Security:
#    - Stored in /etc/secret/private.key (or custom PRIVATE_KEY_FILE)
#    - File permissions MUST be 600 (owner read/write only)
#    - All keys must start with "0x"
#    - See server/PRIVATE_KEY_SETUP.md for details
# 2. Multiple RPC URLs can be comma-separated for load balancing
# 3. For testnet (base-sepolia):
#    - Use Base Sepolia RPC
#    - USDC: 0x036CbD53842c5426634e7929541eC2318f3dCF7e
# 4. For mainnet (base):
#    - Use Base Mainnet RPC
#    - USDC: 0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913
# 5. AI Agent:
#    - AGENT_ENCRYPTION_KEY is REQUIRED for AI agent functionality
#    - Keep it secure and backed up (losing it = losing access to encrypted keys)
# 6. Database:
#    - Run migrations before starting: npm run db:init
#    - AI Agent requires migration 006: psql $DATABASE_URL -f db/migrations/006_add_ai_agent_system.sql

# ===========================================
# Quick Setup Commands
# ===========================================

# 1. Setup private keys (NEW!)
# See server/PRIVATE_KEY_SETUP.md
# Or use migration script: bash scripts/migrate-keys-to-file.sh

# 2. Initialize database
# npm run db:init

# 3. Run AI Agent migration
# psql $DATABASE_URL -f db/migrations/006_add_ai_agent_system.sql

# 4. Generate encryption key
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# 5. Start server
# npm run dev          # Development
# npm run build && pm2 start ecosystem.config.cjs  # Production
